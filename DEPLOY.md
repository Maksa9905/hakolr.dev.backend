# Деплой на Vercel

## Преимущества Vercel

- ✅ Бесплатный тарифный план (100 GB трафика, 100 деплоев в месяц)
- ✅ Простая интеграция с GitHub
- ✅ Автоматические деплои при push
- ✅ Поддержка serverless функций
- ✅ CDN и быстрое развертывание

## Подготовка к деплою

1. Убедитесь что проект собирается:
   ```bash
   npm run build
   ```

2. Загрузите код в GitHub репозиторий

## Деплой

### Шаг 1: Регистрация на Vercel
1. Зарегистрируйтесь на [Vercel](https://vercel.com/)
2. Подключите свой GitHub аккаунт

### Шаг 2: Создание проекта
1. Нажмите "New Project"
2. Выберите репозиторий `hakolr.dev.backend`
3. Выберите "Other" как Framework preset

### Шаг 3: Настройка проекта
В настройках проекта:
- **Build Command**: `npm run build`
- **Output Directory**: Оставьте пустым
- **Install Command**: `npm install`

### Шаг 4: Настройка переменных окружения
В разделе "Environment Variables" добавьте:

```
NODE_ENV=production
TELEGRAM_BOT_TOKEN=ваш_токен_бота
ADMIN_LOGIN=ваш_логин
ADMIN_PASSWORD=ваш_пароль
JWT_SECRET=ваш_jwt_секрет
DATABASE_URL=строка_подключения_к_базе
```

### Шаг 5: Настройка базы данных
Для PostgreSQL можно использовать:
- [Neon](https://neon.tech/) - бесплатный PostgreSQL
- [PlanetScale](https://planetscale.com/) - бесплатный MySQL
- [Supabase](https://supabase.com/) - бесплатный PostgreSQL

#### Пример для Neon:
1. Создайте аккаунт на [Neon](https://neon.tech/)
2. Создайте базу данных
3. Скопируйте строку подключения
4. Добавьте в переменные окружения как `DATABASE_URL`

### Шаг 6: Деплой
1. Нажмите "Deploy"
2. Vercel автоматически задеплоит проект
3. Получите URL (например: `https://your-project.vercel.app`)

## Проверка работы

1. Откройте `https://your-project.vercel.app/api/posts`
2. Должен вернуться JSON с постами
3. Проверьте Telegram бот - отправьте `/start`

## Автоматические деплои

Vercel автоматически деплоит:
- Production деплой при push в `main` ветку
- Preview деплой при создании pull request

## Мониторинг

- Логи доступны в дашборде Vercel
- Функциональная аналитика показывает производительность
- Настройте алерты для ошибок

## Лимиты бесплатного плана

- 100 GB трафика в месяц
- 100 деплоев в месяц
- 10 секунд максимальное время выполнения функции
- 50 MB максимальный размер функции

## Обновления

Для обновления просто сделайте `git push` в main ветку.

## Troubleshooting

### Проблемы с холодным стартом
- Первый запрос может быть медленным (~3-5 сек)
- Это нормально для serverless функций

### Проблемы с базой данных
- Убедитесь что `DATABASE_URL` правильно настроен
- Проверьте что база данных доступна из интернета

### Проблемы с CORS
- Добавьте домен фронтенда в `origin` массив в `main.ts` 